%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Filters bank (initialization)
% version 5
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% INPUT:   ---
% OUTPUT:  state = created state of filters bank
%                  state.N
%                  state.freqs
%                  state.taps
%                  state.LF300_coeff ... state.HF4000_coeff
%                  state.LF300 ... state.HF4000
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

function [state] = filter_bank_5_init

    % we shall use fixed point format - fract16 or (1.15), so
    % all coefficients are integer.
    K = 1.0/32768;
    
    state.freqs = [ 300, 600, 900, 1200, 1500, 1800, 2100, 2500, 3000, 3500, 4000];
    state.N     = length(state.freqs);
    vy          = zeros(1,state.N);
    state.taps  = 25;
    
    state.LF300_coeff  = K * [
                                253,    471,    707,    955,   1207,   1455,   1691,   1907,   2095,  ...
                                2249,   2364,   2434,   2458,   2434,   2364,   2249,   2095,   1907,  ...
                                1691,   1455,   1207,    955,    707,    471,    253
                            ];
    state.LF300        = my_filter_init(state.LF300_coeff);
    
    state.BF600_coeff  = K * [
                                -733,  -1273,  -1706,  -1952,  -1953,  -1683,  -1162,   -447,    368,  ...
                                1172,   1848,   2299,   2458,   2299,   1848,   1172,    368,   -447,  ...
                                -1162,  -1683,  -1953,  -1952,  -1706,  -1273,   -733
                            ];
    state.BF600        = my_filter_init(state.BF600_coeff);
    
    state.BF900_coeff  = K * [
                                1142,   1700,   1706,   1086,      0,  -1191,  -2055,  -2250,  -1663,  ...
                                -468,    930,   2038,   2458,   2038,    930,   -468,  -1663,  -2250,  ...
                                -2055,  -1191,      0,   1086,   1706,   1700,   1142
                            ];
    state.BF900        = my_filter_init(state.BF900_coeff);
    
    state.BF1200_coeff  = K * [
                                -1439,  -1626,   -707,    818,   1953,   1870,    519,  -1274,  -2323,  ...
                                -1883,   -191,   1664,   2458,   1664,   -191,  -1883,  -2323,  -1274,  ...
                                519,   1870,   1953,    818,   -707,  -1626,  -1439
                            ];
    state.BF1200        = my_filter_init(state.BF1200_coeff);
    
    state.BF1500_coeff  = K * [
                                1595,   1073,   -707,  -1940,  -1207,    897,   2217,   1274,  -1068,  ...
                                -2396,  -1270,   1198,   2458,   1198,  -1270,  -2396,  -1068,   1274,  ...
                                2217,    897,  -1207,  -1940,   -707,   1073,   1595
                            ];
    state.BF1500        = my_filter_init(state.BF1500_coeff);
    
    state.BF1800_coeff  = K * [
                                -1595,   -204,   1706,   1210,  -1207,  -2011,    174,   2250,   1068,  ...
                                -1761,  -2073,    665,   2458,    665,  -2073,  -1761,   1068,   2250,  ...
                                174,  -2011,  -1207,   1210,   1706,   -204,  -1595
                            ];
    state.BF1800        = my_filter_init(state.BF1800_coeff);
    
    state.BF2100_coeff  = K * [
                                1439,   -726,  -1706,    676,   1953,   -582,  -2162,    447,   2323,  ...
                                -282,  -2423,     96,   2458,     96,  -2423,   -282,   2323,    447,  ...
                                -2162,   -582,   1953,    676,  -1706,   -726,   1439
                            ];
    state.BF2100        = my_filter_init(state.BF2100_coeff);
    
    state.BF2500_coeff  = K * [
                                -1479,    929,   1414,  -1886,   -746,   2593,   -433,  -2697,   1790,  ...
                                2042,  -2867,   -761,   3277,   -761,  -2867,   2042,   1790,  -2697,  ...
                                -433,   2593,   -746,  -1886,   1414,    929,  -1479
                            ];
    state.BF2500        = my_filter_init(state.BF2500_coeff);
    
    state.BF3000_coeff  = K * [
                                817,    292,  -1706,   1826,      0,  -2380,   2923,   -670,  -2590,  ...
                                3775,  -1525,  -2260,   4096,  -2260,  -1525,   3775,  -2590,   -670,  ...
                                2923,  -2380,      0,   1826,  -1706,    292,    817
                            ];
    state.BF3000        = my_filter_init(state.BF3000_coeff);
    
    state.BF3500_coeff  = K * [
                                817,  -1469,   1706,  -1220,      0,   1591,  -2923,   3367,  -2590,  ...
                                751,   1525,  -3382,   4096,  -3382,   1525,    751,  -2590,   3367,  ...
                                -2923,   1591,      0,  -1220,   1706,  -1469,    817
                            ];
    state.BF3500        = my_filter_init(state.BF3500_coeff);
    
    state.HF4000_coeff  = K * [
                                -817,    832,   -707,    429,      0,   -559,   1211,  -1907,   2590,  ...
                                -3200,   3681,  -3990,   4096,  -3990,   3681,  -3200,   2590,  -1907,  ...
                                1211,   -559,      0,    429,   -707,    832,   -817
                            ];
    state.HF4000        = my_filter_init(state.HF4000_coeff);

return
